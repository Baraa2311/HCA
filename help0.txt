from django.db import models
from accounts.models import Patient,Doctor

class Diagnostic(models.Model):
    patient = models.ForeignKey(Patient, on_delete=models.CASCADE, related_name='diagnostics')
    doctor = models.ForeignKey(Doctor, on_delete=models.CASCADE, related_name='diagnostics')
    test_name = models.CharField(max_length=255)
    test_results = models.TextField()
    test_date = models.DateField(auto_now_add=True)
    created_at = models.DateTimeField(auto_now_add=True)
    
    def __str__(self):
        return f"{self.test_name} for {self.patient.name}"
        
class Prescription(models.Model):
    patient = models.ForeignKey(Patient, on_delete=models.CASCADE, related_name='prescriptions')
    doctor = models.ForeignKey(Doctor, on_delete=models.CASCADE, related_name='prescriptions')
    medication_name = models.CharField(max_length=255)
    dosage = models.CharField(max_length=255)
    instructions = models.TextField()
    issue_date = models.DateField(auto_now_add=True)
    created_at = models.DateTimeField(auto_now_add=True)
    
    def __str__(self):
        return f"Prescription for {self.patient.name} - {self.medication_name}"

add a time stamp to mark the creation date
create the necessary files for creating editing showing details use CBVs
the doctor is the user who can create and edit and display them
the patient can only display
the doctor and patient should be filled automatically without inputing them into the form